<html>
	<head>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" type="text/css" media="screen">
	</head>
	<body>
    <script>
      
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

		    for (var i = 0; i < window.geemails.length; i++) {
      
          //Creates a DIV ID called MailArea
          var mailArea = document.createElement('div');

          //Assigns MailArea class to 'mailArea'
          mailArea.className = "mailArea"; 

          //Adds the mailArea/emailLine div to the container
          container.appendChild(mailArea);

          //Creates a DIV ID to hold sender, subject, date
          var subjectArea = document.createElement('div');
          subjectArea.className = "subjectArea";
          mailArea.appendChild(subjectArea);

          var senderArea = document.createElement('div');
          senderArea.className = "senderArea";
          mailArea.appendChild(senderArea);

          var dateArea = document.createElement('div');
          dateArea.className = "dateArea";
          mailArea.appendChild(dateArea);

          //Creates a DIV ID called BodyArea
          var bodyArea = document.createElement('div');

          //Assigns bodyArea class to 
          bodyArea.className = "bodyArea";

          subjectArea.appendChild(bodyArea);

          //SUBJECT stuff
      		var displaySubject = document.createElement('div');
      		displaySubject.id = 'subject'.concat(i + '');
      		displaySubject.innerHTML = geemails[i].subject;
          displaySubject.addEventListener("click", toggle );
      		subjectArea.appendChild(displaySubject);
      		
      	//SENDER stuff	
      		var displaySender = document.createElement('div');
      		displaySender.id = 'sender'.concat(i + '');
          displaySender.innerHTML = geemails[i].sender;
      		senderArea.appendChild(displaySender);

      	//DATE stuff
      		var displayDate = document.createElement('div');
      		displayDate.id = 'date'.concat(i + '');
          displayDate.innerHTML = geemails[i].date;
      		dateArea.appendChild(displayDate);
        
        //BODY stuff
      		var displayBody = document.createElement('div');
      		displayBody.id = 'body'.concat(i + '');
          displayBody.innerHTML = geemails[i].body;
          displayBody.classList.add('hidden');
      		bodyArea.appendChild(displayBody);
        } //End of For
            
        //Get New Messages
		    function newMessages(){

          var mailArea = document.createElement('div');
          mailArea.className = "mailArea"; 
          container.appendChild(mailArea);
          var subjectArea = document.createElement('div');
          subjectArea.className = "subjectArea";
          mailArea.appendChild(subjectArea);
          var senderArea = document.createElement('div');
          senderArea.className = "senderArea";
          mailArea.appendChild(senderArea);
          var dateArea = document.createElement('div');
          dateArea.className = "dateArea";
          mailArea.appendChild(dateArea);
          var bodyArea = document.createElement('div');
          bodyArea.className = "bodyArea";
          subjectArea.appendChild(bodyArea);
    
          //Randomizer
			    var random = window.geemails[Math.floor(Math.random() * window.geemails.length)];
		
		      //Subject - Get New Message
			    var displaySubject = document.createElement('div');
      		displaySubject.id = 'subject'.concat(i ++);
          displaySubject.innerHTML = random.subject;
          displaySubject.addEventListener("click", toggle );
      		subjectArea.appendChild(displaySubject);

		      //Date - Get New Message
   			  var displayDate = document.createElement('div');
      		displayDate.id = 'date'.concat(i ++);
          displayDate.innerHTML = random.date;
      		dateArea.appendChild(displayDate);

		      //Sender - Get New Message
			    var displaySender = document.createElement('div');
      		displaySender.id = 'sender'.concat(i ++);
          displaySender.innerHTML = random.sender;
      		senderArea.appendChild(displaySender);

      	//Body - Get New Message	
      		var displayBody = document.createElement('div');
      		displayBody.id = 'body'.concat(i + '');
          displayBody.innerHTML = random.body;
          displayBody.classList.add('hidden');
      		bodyArea.appendChild(displayBody);


          // Inbox Counter Counting New Messages
          var inboxNum = document.getElementsByClassName('mailArea');
          var inboxCount = document.getElementById("inboxCount");
          inboxCount.innerHTML = inboxNum.length;

        }  //End of New Messages
     
      setInterval(newMessages, 2000);

      //Show or Hide the Body of Messages 
      function toggle() {
        var bodyDiv = event.target.id.split("subject");
        console.log(event.target.id, "eventTarget iD");
        var showHide = document.getElementById('body'+ bodyDiv[1]);
        if (showHide.className === "hidden") {
          showHide.className = "unhidden-body";
        } else {
          showHide.className = "hidden";
          }
      }// End of Toggle

      //Counter outside of the New Messages function  
      var inboxNum = document.getElementsByClassName('mailArea');
      var inboxCount = document.getElementById("inboxCount");
      inboxCount.innerHTML = inboxNum.length;

    };  //End of Window Onload


    </script>
    </body>
       

		    <div id ="header">
			   <h1>GeeMail</h1>
		      </div>    
		    <div id="inbox">Inbox Count:</div><div id="inboxCount"></div>
      <div id="container"></div>

	</body>
</html>


